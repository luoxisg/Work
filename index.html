<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>é¡¹ç›®å·¥ä½œè¯´æ˜</title>
  <style>
    /* --- æ ¹å˜é‡ä¸å…¨å±€æ ·å¼ --- */
    :root {
      --bg: #121212;
      --header-bg: #1F1F1F;
      --card-bg: #1F1F1F;
      --text: #E0E0E0;
      --text-muted: #888888;
      --link: #4FC3F7;
      --link-hover: #80D8FF;
      --nav-bg: #1F1F1F;
      --nav-active: #4FC3F7;
      --shadow-color: rgba(0,0,0,0.5);
      --border-radius: 8px;
    }

    /* å…¨å±€é‡ç½®ä¸åŸºç¡€è®¾ç½® */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      position: relative;
    }

    /* å¢å¼ºçš„å¯è®¿é—®æ€§ï¼šä¸ºé”®ç›˜å¯¼èˆªæ·»åŠ æ¸…æ™°çš„ç„¦ç‚¹æ ·å¼ */
    :focus-visible {
      outline: 2px solid var(--link);
      outline-offset: 2px;
    }

    /* --- å¸ƒå±€ç»„ä»¶ --- */
    header {
      background: var(--header-bg);
      padding: 1rem;
      box-shadow: 0 2px 4px var(--shadow-color);
      position: sticky;
      top: 0;
      z-index: 800;
      text-align: center;
    }

    main {
      flex: 1;
      padding: 1rem;
      margin-bottom: 56px; /* ä¸ºåº•éƒ¨å¯¼èˆªç•™å‡ºç©ºé—´ */
    }

    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    section {
      margin-bottom: 2rem;
    }

    /* --- UI å…ƒç´  --- */
    #header-title {
      margin: 0;
      font-size: 1.5rem;
    }

    #search {
      margin: 0.5rem auto;
      width: 80%;
      max-width: 300px;
      padding: 0.5rem;
      border: 1px solid var(--text-muted);
      border-radius: var(--border-radius);
      font-size: 1rem;
      background-color: var(--bg);
      color: var(--text);
    }

    #lang-toggle {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: 1px solid var(--text-muted);
      border-radius: 4px;
      color: var(--text);
      font-size: 1rem;
      cursor: pointer;
      padding: 0.25rem 0.5rem;
    }

    #download-btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      background: var(--card-bg);
      border-radius: var(--border-radius);
      color: var(--link);
      text-decoration: none;
      box-shadow: 0 1px 3px var(--shadow-color);
      transition: background 0.2s;
      margin-bottom: 1rem;
    }
    #download-btn:hover {
      background: #2a2a2a;
    }

    section h2 {
      margin: 1rem 0 0.5rem;
      font-size: 1.2rem;
      color: var(--link);
      border-bottom: 1px solid var(--text-muted);
      padding-bottom: 0.5rem;
    }

   .card {
      background: var(--card-bg);
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      box-shadow: 0 1px 3px var(--shadow-color);
      transition: background 0.2s, transform 0.1s;
      overflow: hidden; /* ç¡®ä¿å­å…ƒç´ åœ†è§’ */
    }
   .card:hover {
      transform: translateY(-2px);
    }

   .card-link {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      color: var(--link);
      padding: 1.25rem 1rem;
    }
   .card-link:hover {
      color: var(--link-hover);
      background: #2a2a2a;
    }

   .card.icon {
      font-size: 1.5rem;
    }

   .card.title {
      flex: 1;
      font-size: 1.1rem;
    }
    
   .no-results {
      text-align: center;
      padding: 2rem;
      color: var(--text-muted);
      display: none; /* é»˜è®¤éšè— */
    }

    /* --- åº•éƒ¨å¯¼èˆª --- */
    #bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 56px;
      background: var(--nav-bg);
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -1px 4px var(--shadow-color);
      z-index: 950;
    }
    #bottom-nav a {
      text-align: center;
      font-size: 0.75rem;
      color: var(--text-muted);
      text-decoration: none;
      padding: 0.25rem;
      border-radius: 4px;
    }
    #bottom-nav a.active { color: var(--nav-active); }
    #bottom-nav.icon {
      display: block;
      font-size: 1.25rem;
    }

    /* --- å†…åµŒè§†å›¾ & éª¨æ¶åŠ è½½ --- */
    #project-view {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg);
      display: none;
      flex-direction: column;
      z-index: 1100;
      animation: fadeIn 0.3s ease-in-out;
    }

    #project-header {
      background: var(--header-bg);
      color: var(--text);
      padding: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-shrink: 0;
    }

    #project-back {
      background: transparent;
      border: 1px solid var(--text-muted);
      border-radius: 4px;
      color: var(--text);
      font-size: 1rem;
      cursor: pointer;
      padding: 0.25rem 0.5rem;
    }

    #breadcrumb {
      font-size: 0.9rem;
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    #breadcrumb a { color: var(--link); text-decoration: none; }
    #breadcrumb span { margin: 0 0.25rem; }

    #skeleton {
      display: block; /* é»˜è®¤æ˜¾ç¤ºï¼Œç”±JSæ§åˆ¶ */
      position: absolute;
      top: 50px; /* å‡è®¾headeré«˜åº¦ */
      left: 0;
      width: 100%;
      height: calc(100% - 50px);
      background: linear-gradient(90deg, #1f1f1f 25%, #2a2a2a 50%, #1f1f1f 75%);
      background-size: 200% 100%;
      animation: pulse 1.5s infinite linear;
      z-index: 950;
    }

    @keyframes pulse {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    #project-frame {
      flex: 1;
      border: none;
      background: var(--bg);
    }

    /* --- AI èŠå¤©æ¡† --- */
    #chat-toggle {
      position: fixed;
      bottom: 72px;
      right: 1rem;
      width: 56px;
      height: 56px;
      background: var(--link);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: #000;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      z-index: 1000;
      border: none;
    }

    #chat-box {
      position: fixed;
      bottom: 72px;
      right: 1rem;
      width: 90%;
      max-width: 320px;
      height: 70%;
      max-height: 450px;
      background: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 4px 12px var(--shadow-color);
      display: none;
      flex-direction: column;
      overflow: hidden;
      z-index: 1000;
      animation: fadeIn 0.3s;
    }

    #chat-header {
      padding: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--header-bg);
      flex-shrink: 0;
    }
    
    #chat-close {
      background: none;
      border: none;
      color: var(--text);
      font-size: 1.2rem;
      cursor: pointer;
    }

    #chat-messages {
      flex: 1;
      padding: 0.75rem;
      overflow-y: auto;
      font-size: 0.9rem;
      color: var(--text);
    }

   .msg { 
      margin-bottom: 0.75rem; 
      display: flex;
    }
   .msg.user { justify-content: flex-end; }
   .msg.ai { justify-content: flex-start; }
   .msg.typing {
      font-style: italic;
      color: var(--text-muted);
    }

   .bubble {
      display: inline-block;
      padding: 0.5rem 0.75rem;
      border-radius: 12px;
      max-width: 85%;
      line-height: 1.4;
    }
   .msg.user.bubble { background: var(--link); color: #000; border-bottom-right-radius: 2px; }
   .msg.ai.bubble { background: #333; color: var(--text); border-bottom-left-radius: 2px; }

    #chat-input-container {
      padding: 0.5rem;
      display: flex;
      gap: 0.5rem;
      background: var(--header-bg);
      border-top: 1px solid var(--text-muted);
      flex-shrink: 0;
    }

    #chat-text {
      flex: 1;
      padding: 0.5rem;
      border: 1px solid var(--text-muted);
      border-radius: 4px;
      background: var(--bg);
      color: var(--text);
    }

    #chat-send {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
      background: var(--link);
      color: #000;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1 id="header-title">é¡¹ç›®å·¥ä½œè¯´æ˜</h1>
    <input type="text" id="search" placeholder="æœç´¢é¡¹ç›®â€¦"/>
    <button id="lang-toggle" aria-label="Toggle Language">EN</button>
  </header>

  <main id="list-view">
    <div style="text-align: center;">
      <a id="download-btn" href="https://luoxisg.github.io/downloads/lxwork.apk" download>ä¸‹è½½ APK</a>
    </div>

    <section>
      <h2 data-lang-key="section_industrial">å·¥ä¸šç³»ç»Ÿ</h2>
      <div class="card">
        <a href="https://luoxisg.github.io/paint/" class="card-link" data-title-key="card1">
          <span class="icon" role="img" aria-label="æ–‡æ¡£å›¾æ ‡">ğŸ“„</span>
          <span class="title">ä¸‰è½´å–·ç»˜ç³»ç»Ÿå·¥ä½œè¯´æ˜</span>
        </a>
      </div>
      <div class="card">
        <a href="https://luoxisg.github.io/cutting/" class="card-link" data-title-key="card2">
          <span class="icon" role="img" aria-label="å‰ªåˆ€å›¾æ ‡">âœ‚ï¸</span>
          <span class="title">è£åˆ‡ç³»ç»Ÿå·¥ä½œè¯´æ˜</span>
        </a>
      </div>
    </section>

    <section>
      <h2 data-lang-key="section_consumer">æ¶ˆè´¹è€…ç³»ç»Ÿ</h2>
      <div class="card">
        <a href="https://github.com/luoxisg/xcareBrochure" class="card-link" data-title-key="card5">
          <span class="icon" role="img" aria-label="å®£ä¼ å†Œå›¾æ ‡">ğŸ“˜</span>
          <span class="title">xcareBrochure ä»“åº“</span>
        </a>
      </div>
      <div class="card">
        <a href="https://github.com/luoxisg/xcare" class="card-link" data-title-key="card6">
          <span class="icon" role="img" aria-label="ä¹¦ç±å›¾æ ‡">ğŸ“—</span>
          <span class="title">xcare ä»“åº“</span>
        </a>
      </div>
      <div class="card">
        <a href="https://github.com/luoxisg/xstellux" class="card-link" data-title-key="card7">
          <span class="icon" role="img" aria-label="æ˜Ÿæ˜Ÿå›¾æ ‡">âœ¨</span>
          <span class="title">xstellux ä»“åº“</span>
        </a>
      </div>
    </section>

    <section>
      <h2 data-lang-key="section_tech">æŠ€æœ¯åˆ›æ–°</h2>
      <div class="card">
        <a href="https://github.com/luoxisg/Alboxnew" class="card-link" data-title-key="card3">
          <span class="icon" role="img" aria-label="ç« é±¼å›¾æ ‡">ğŸ™</span>
          <span class="title">Alboxnew ä»“åº“</span>
        </a>
      </div>
      <div class="card">
        <a href="https://github.com/luoxisg/RoboMaster-SDK" class="card-link" data-title-key="card4">
          <span class="icon" role="img" aria-label="æœºå™¨äººå›¾æ ‡">ğŸ¤–</span>
          <span class="title">RoboMaster-SDK ä»“åº“</span>
        </a>
      </div>
    </section>
    
    <p class="no-results" data-lang-key="no_results">æœªæ‰¾åˆ°åŒ¹é…çš„é¡¹ç›®ã€‚</p>
  </main>

  <footer>
    <p id="footer-text">Â© 2025 LuoxiSG</p>
  </footer>

  <div id="project-view">
    <div id="project-header">
      <button id="project-back" aria-label="è¿”å›åˆ—è¡¨">è¿”å›</button>
      <nav id="breadcrumb" aria-label="Breadcrumb">
        <a href="#" id="breadcrumb-home">Home</a>
        <span>/</span>
        <span id="project-title"></span>
      </nav>
    </div>
    <div id="skeleton"></div>
    <iframe id="project-frame" title="é¡¹ç›®å†…å®¹"></iframe>
  </div>

  <button id="chat-toggle" aria-label="æ‰“å¼€ AI åŠ©æ‰‹">ğŸ’¬</button>
  <div id="chat-box" role="dialog" aria-modal="true" aria-labelledby="chat-header-text">
    <header id="chat-header">
      <span id="chat-header-text">AI å°åŠ©æ‰‹</span>
      <button id="chat-close" aria-label="å…³é—­èŠå¤©æ¡†">âœ–ï¸</button>
    </header>
    <div id="chat-messages"></div>
    <div id="chat-input-container">
      <input type="text" id="chat-text" placeholder="è¯·è¾“å…¥é—®é¢˜â€¦"/>
      <button id="chat-send">å‘é€</button>
    </div>
  </div>

  <nav id="bottom-nav">
    <a href="#" class="nav-item active"><span class="icon">ğŸ </span><span data-lang-key="nav_home">Home</span></a>
    <a href="#" class="nav-item"><span class="icon">ğŸ•’</span><span data-lang-key="nav_latest">Latest</span></a>
    <a href="#" class="nav-item"><span class="icon">â­</span><span data-lang-key="nav_myst">myST+</span></a>
    <a href="#" class="nav-item"><span class="icon">ğŸ“„</span><span data-lang-key="nav_epaper">E-paper</span></a>
    <a href="#" class="nav-item"><span class="icon">â˜°</span><span data-lang-key="nav_menu">Menu</span></a>
  </nav>

  <script>
    // ä½¿ç”¨ DOMContentLoaded ç¡®ä¿åœ¨æ“ä½œ DOM å‰å·²å®Œå…¨åŠ è½½
    document.addEventListener('DOMContentLoaded', () => {
      
      // --- æ¨¡å—åŒ–ï¼šçŠ¶æ€ä¸å…ƒç´ ç®¡ç† ---
      const state = {
        lang: localStorage.getItem('lang') |

| 'zh',
        texts: {
          zh: {
            header: "é¡¹ç›®å·¥ä½œè¯´æ˜",
            placeholder: "æœç´¢é¡¹ç›®â€¦",
            download: "ä¸‹è½½ APK",
            section_industrial: "å·¥ä¸šç³»ç»Ÿ",
            section_consumer: "æ¶ˆè´¹è€…ç³»ç»Ÿ",
            section_tech: "æŠ€æœ¯åˆ›æ–°",
            card1: "ä¸‰è½´å–·ç»˜ç³»ç»Ÿå·¥ä½œè¯´æ˜",
            card2: "è£åˆ‡ç³»ç»Ÿå·¥ä½œè¯´æ˜",
            card3: "Alboxnew ä»“åº“",
            card4: "RoboMaster-SDK ä»“åº“",
            card5: "xcareBrochure ä»“åº“",
            card6: "xcare ä»“åº“",
            card7: "xstellux ä»“åº“",
            footer: "Â© 2025 LuoxiSG",
            chatHeader: "AI å°åŠ©æ‰‹",
            chatPlaceholder: "è¯·è¾“å…¥é—®é¢˜â€¦",
            chatSend: "å‘é€",
            back: "è¿”å›",
            no_results: "æœªæ‰¾åˆ°åŒ¹é…çš„é¡¹ç›®ã€‚",
            nav_home: "Home",
            nav_latest: "Latest",
            nav_myst: "myST+",
            nav_epaper: "E-paper",
            nav_menu: "Menu"
          },
          en: {
            header: "Project Overview",
            placeholder: "Search projectsâ€¦",
            download: "Download APK",
            section_industrial: "Industrial Systems",
            section_consumer: "Consumer Systems",
            section_tech: "Tech Innovations",
            card1: "3-Axis Painting System Docs",
            card2: "Cutting System Docs",
            card3: "Alboxnew Repo",
            card4: "RoboMaster SDK Repo",
            card5: "xcareBrochure Repo",
            card6: "xcare Repo",
            card7: "xstellux Repo",
            footer: "Â© 2025 LuoxiSG",
            chatHeader: "AI Assistant",
            chatPlaceholder: "Type your questionâ€¦",
            chatSend: "Send",
            back: "Back",
            no_results: "No matching projects found.",
            nav_home: "Home",
            nav_latest: "Latest",
            nav_myst: "myST+",
            nav_epaper: "E-paper",
            nav_menu: "Menu"
          }
        }
      };

      const DOMElements = {
        html: document.documentElement,
        headerTitle: document.getElementById('header-title'),
        searchInput: document.getElementById('search'),
        langToggle: document.getElementById('lang-toggle'),
        downloadBtn: document.getElementById('download-btn'),
        footerText: document.getElementById('footer-text'),
        mainView: document.getElementById('list-view'),
        projectView: document.getElementById('project-view'),
        projectFrame: document.getElementById('project-frame'),
        skeleton: document.getElementById('skeleton'),
        projectBack: document.getElementById('project-back'),
        breadcrumbHome: document.getElementById('breadcrumb-home'),
        projectTitle: document.getElementById('project-title'),
        chatToggle: document.getElementById('chat-toggle'),
        chatBox: document.getElementById('chat-box'),
        chatClose: document.getElementById('chat-close'),
        chatHeader: document.getElementById('chat-header-text'),
        chatMessages: document.getElementById('chat-messages'),
        chatInput: document.getElementById('chat-text'),
        chatSend: document.getElementById('chat-send'),
        noResults: document.querySelector('.no-results'),
        cards: document.querySelectorAll('.card')
      };

      // --- æ¨¡å—åŒ–ï¼šè¯­è¨€åˆ‡æ¢åŠŸèƒ½ ---
      const languageManager = {
        init() {
          DOMElements.langToggle.addEventListener('click', () => this.toggle());
          this.update();
        },
        toggle() {
          state.lang = state.lang === 'zh'? 'en' : 'zh';
          localStorage.setItem('lang', state.lang);
          this.update();
        },
        update() {
          const langTexts = state.texts[state.lang];
          DOMElements.html.lang = state.lang === 'zh'? 'zh-CN' : 'en';
          DOMElements.headerTitle.textContent = langTexts.header;
          DOMElements.searchInput.placeholder = langTexts.placeholder;
          DOMElements.downloadBtn.textContent = langTexts.download;
          DOMElements.footerText.textContent = langTexts.footer;
          DOMElements.chatHeader.textContent = langTexts.chatHeader;
          DOMElements.chatInput.placeholder = langTexts.chatPlaceholder;
          DOMElements.chatSend.textContent = langTexts.chatSend;
          DOMElements.projectBack.textContent = langTexts.back;
          DOMElements.noResults.textContent = langTexts.no_results;
          
          document.querySelectorAll('[data-title-key]').forEach(el => {
            el.querySelector('.title').textContent = langTexts[el.dataset.titleKey];
          });
          document.querySelectorAll('[data-lang-key]').forEach(el => {
            el.textContent = langTexts[el.dataset.langKey];
          });

          DOMElements.langToggle.textContent = state.lang === 'zh'? 'EN' : 'ä¸­';
        }
      };

      // --- æ¨¡å—åŒ–ï¼šæœç´¢è¿‡æ»¤åŠŸèƒ½ ---
      const searchManager = {
        init() {
          DOMElements.searchInput.addEventListener('input', () => this.filter());
        },
        filter() {
          const query = DOMElements.searchInput.value.trim().toLowerCase();
          let visibleCount = 0;
          DOMElements.cards.forEach(card => {
            const title = card.querySelector('.title').textContent.toLowerCase();
            const isVisible = title.includes(query);
            card.style.display = isVisible? 'block' : 'none';
            if (isVisible) visibleCount++;
          });
          DOMElements.noResults.style.display = visibleCount === 0? 'block' : 'none';
        }
      };

      // --- æ¨¡å—åŒ–ï¼šå†…åµŒè§†å›¾ç®¡ç†å™¨ ---
      const viewManager = {
        init() {
          // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œæé«˜æ€§èƒ½
          DOMElements.mainView.addEventListener('click', (e) => {
            const link = e.target.closest('.card-link');
            if (link) {
              e.preventDefault();
              this.showProject(link.href, link.querySelector('.title').textContent);
            }
          });

          DOMElements.projectFrame.addEventListener('load', () => this.hideSkeleton());
          DOMElements.projectBack.addEventListener('click', () => this.hideProject());
          DOMElements.breadcrumbHome.addEventListener('click', (e) => {
            e.preventDefault();
            this.hideProject();
          });
        },
        showProject(url, title) {
          DOMElements.skeleton.style.display = 'block';
          DOMElements.projectTitle.textContent = title;
          DOMElements.projectFrame.src = 'about:blank'; // æ¸…ç©ºæ—§å†…å®¹
          setTimeout(() => { DOMElements.projectFrame.src = url; }, 50); // å»¶è¿ŸåŠ è½½ä»¥æ˜¾ç¤ºéª¨æ¶
          DOMElements.mainView.style.display = 'none';
          DOMElements.projectView.style.display = 'flex';
        },
        hideProject() {
          DOMElements.projectFrame.src = 'about:blank';
          DOMElements.projectView.style.display = 'none';
          DOMElements.mainView.style.display = 'block';
        },
        hideSkeleton() {
          DOMElements.skeleton.style.display = 'none';
        }
      };

      // --- æ¨¡å—åŒ–ï¼šAI èŠå¤©æ¡†åŠŸèƒ½ ---
      const chatBot = {
        init() {
          DOMElements.chatToggle.addEventListener('click', () => this.toggle(true));
          DOMElements.chatClose.addEventListener('click', () => this.toggle(false));
          DOMElements.chatSend.addEventListener('click', () => this.sendMessage());
          DOMElements.chatInput.addEvent
